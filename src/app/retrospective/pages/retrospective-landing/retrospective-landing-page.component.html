<div class="retrospective-landing">
  <!-- Hero Header -->
  <div class="hero-header">
    <div class="landing-container">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">Sprint Retrospectives</h1>
          <p class="hero-subtitle">Transform team insights into actionable improvements</p>
        </div>
        
        <div class="hero-actions">
          <button 
            nz-button 
            nzSize="large"
            class="try-demo-btn"
            (click)="joinBoardDemo()"
          >
            <span>Try Demo</span>
          </button>
          
          <button 
            nz-button 
            nzSize="large"
            nzType="primary"
            class="create-board-btn"
            (click)="showCreateBoardModal()"
          >
            <span nz-icon nzType="plus"></span>
            <span>Create Board</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="landing-container">
    <!-- Modern Stats Section -->
    <div class="stats-section">
      <div class="stats-grid">
        <!-- Total Boards -->
        <div class="modern-stat-card">
          <div class="stat-icon-wrapper blue">
            <span nz-icon nzType="project" nzTheme="outline"></span>
          </div>
          <div class="stat-content">
            <h3 class="stat-value">{{ boards.length }}</h3>
            <p class="stat-label">Total Boards</p>
          </div>
          <div class="stat-decoration blue"></div>
        </div>

        <!-- Active Boards -->
        <div class="modern-stat-card">
          <div class="stat-icon-wrapper green">
            <span nz-icon nzType="check-circle" nzTheme="outline"></span>
          </div>
          <div class="stat-content">
            <h3 class="stat-value">{{ getActiveBoards().length }}</h3>
            <p class="stat-label">Active Boards</p>
          </div>
          <div class="stat-decoration green"></div>
        </div>

        <!-- Participants -->
        <div class="modern-stat-card">
          <div class="stat-icon-wrapper purple">
            <span nz-icon nzType="team" nzTheme="outline"></span>
          </div>
          <div class="stat-content">
            <h3 class="stat-value">{{ getTotalParticipants() }}</h3>
            <p class="stat-label">Participants</p>
          </div>
          <div class="stat-decoration purple"></div>
        </div>

        <!-- This Week -->
        <div class="modern-stat-card">
          <div class="stat-icon-wrapper orange">
            <span nz-icon nzType="calendar" nzTheme="outline"></span>
          </div>
          <div class="stat-content">
            <h3 class="stat-value">{{ getThisWeekBoards() }}</h3>
            <p class="stat-label">This Week</p>
          </div>
          <div class="stat-decoration orange"></div>
        </div>
      </div>
    </div>

    <!-- Boards Section -->
    <div class="boards-section">
      <div class="section-header">
        <h2>Your Boards</h2>
      </div>

      <!-- Boards Grid -->
      <div *ngIf="boards.length > 0" class="boards-grid">
        <div 
          *ngFor="let board of boards; trackBy: trackByBoardId"
          class="modern-board-card clickable"
          [ngClass]="{
            'phase-planning': board.currentPhase === 'BRAINSTORMING',
            'phase-active': board.currentPhase === 'GROUPING' || board.currentPhase === 'VOTING',
            'phase-review': board.currentPhase === 'DISCUSSION',
            'phase-completed': board.currentPhase === 'COMPLETED'
          }"
          (click)="openBoard(board.id)"
        >
          <!-- Board Card Header -->
          <div class="board-card-header">
            <div class="board-title-row">
              <h3 class="board-title">{{ board.title }}</h3>
              <span 
                nz-icon 
                nzType="star" 
                [nzTheme]="isBoardFavorite(board.id) ? 'fill' : 'outline'"
                [class.favorited]="isBoardFavorite(board.id)"
                class="favorite-btn"
                (click)="toggleBoardFavorite(board.id); $event.stopPropagation()"
              ></span>
            </div>
            <div class="phase-indicator" nz-tooltip [nzTooltipTitle]="getPhaseDescription(board.currentPhase)">
              <span class="phase-dot"></span>
              <span class="phase-label">{{ getPhaseLabel(board.currentPhase) }}</span>
            </div>
          </div>

          <!-- Board Card Body -->
          <div class="board-card-body">
            <!-- Key Metrics Row -->
            <div class="metrics-row">
              <div class="metric-item">
                <div class="metric-icon">
                  <span nz-icon nzType="snippets" nzTheme="fill"></span>
                </div>
                <div class="metric-content">
                  <span class="metric-value">{{ getStickyNotesCount(board.id) }}</span>
                  <span class="metric-label">Notes</span>
                </div>
              </div>
              
              <div class="metric-divider"></div>
              
              <div class="metric-item">
                <div class="metric-icon">
                  <span nz-icon nzType="team" nzTheme="outline"></span>
                </div>
                <div class="metric-content">
                  <span class="metric-value">{{ board.participants.length }}</span>
                  <span class="metric-label">Members</span>
                </div>
              </div>
            </div>

            <!-- Team Row -->
            <div class="team-row">
              <span class="team-label">Team</span>
              <div class="avatar-group">
                <j-avatar 
                  *ngFor="let participantId of board.participants.slice(0, 5)"
                  [name]="getParticipantInitials(participantId)"
                  [size]="32"
                  class="avatar-item"
                  nz-tooltip
                  [nzTooltipTitle]="getParticipantInitials(participantId)"
                ></j-avatar>
                <span *ngIf="board.participants.length > 5" class="more-count">
                  +{{ board.participants.length - 5 }}
                </span>
              </div>
            </div>
          </div>

          <!-- Board Card Footer -->
          <div class="board-card-footer">
            <div class="board-timestamp">
              <span nz-icon nzType="clock-circle" nzTheme="outline"></span>
              <span>Updated {{ getTimeAgo(board.updatedAt) }}</span>
            </div>
            <div class="board-actions">
              <button 
                nz-button 
                nzType="text" 
                nzSize="small"
                (click)="editBoard(board); $event.stopPropagation()"
                nz-tooltip
                nzTooltipTitle="Edit board"
                class="action-btn"
              >
                <span nz-icon nzType="edit" nzTheme="outline"></span>
              </button>
              <button 
                nz-button 
                nzType="text" 
                nzSize="small"
                (click)="deleteBoard(board.id); $event.stopPropagation()"
                nz-tooltip
                nzTooltipTitle="Delete board"
                class="action-btn delete-btn"
              >
                <span nz-icon nzType="delete" nzTheme="outline"></span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modern Empty State -->
      <div *ngIf="boards.length === 0" class="modern-empty-state">
        <div class="empty-state-content">
          <div class="empty-state-icon">
            <span nz-icon nzType="inbox" nzTheme="outline"></span>
          </div>
          <h3 class="empty-state-title">No boards yet</h3>
          <p class="empty-state-description">Create your first retrospective board to start gathering team insights and drive continuous improvement</p>
          <button 
            nz-button 
            nzType="primary" 
            nzSize="large"
            (click)="showCreateBoardModal()"
            class="empty-state-button"
          >
            <span nz-icon nzType="plus-circle" nzTheme="filled"></span>
            <span>Create Your First Board</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Create Board Modal -->
<nz-modal
  [(nzVisible)]="isCreateModalVisible"
  nzTitle="Create New Board"
  [nzFooter]="null"
  (nzOnCancel)="cancelCreateBoard()"
  nzWidth="520px"
  nzWrapClassName="create-board-modal"
>
  <ng-container *nzModalContent>
    <form class="board-form">
      <div class="form-group">
        <label class="label">Board Title *</label>
        <input
          nz-input
          [(ngModel)]="newBoardTitle"
          name="title"
          placeholder="e.g., Sprint 23 Retrospective"
          class="form-input"
          (keyup.enter)="createBoard()"
        />
      </div>

      <div class="form-group">
        <label class="label">Description</label>
        <textarea
          nz-input
          [(ngModel)]="newBoardDescription"
          name="description"
          placeholder="What is the goal of this retrospective?"
          [nzAutosize]="{ minRows: 3, maxRows: 6 }"
          class="form-input"
          cdkTextareaAutosize
        ></textarea>
      </div>

      <div style="display: flex; justify-content: flex-end; gap: 8px; margin-top: 32px; padding-top: 20px; border-top: 1px solid #f0f0f0;">
        <button 
          nz-button 
          nzType="default"
          (click)="cancelCreateBoard()"
        >
          Cancel
        </button>
        <button 
          nz-button 
          nzType="primary"
          (click)="createBoard()"
          [disabled]="!newBoardTitle.trim()"
        >
          <span nz-icon nzType="plus" nzTheme="outline"></span>
          Create Board
        </button>
      </div>
    </form>
  </ng-container>
</nz-modal>
